<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>榮格心理學互動探索：核心概念與紅書之旅</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony Neutrals -->
    <!-- Application Structure Plan: The application is designed as a non-linear, thematic exploration rather than a linear report. It starts with a captivating introduction, moves to a central 'Core Concepts' dashboard with interactive cards for easy digestion. Key comparisons like Jung vs. Freud are presented in an interactive side-by-side format. 'The Red Book' is treated as a visual, clickable journey with images and text descriptions. A new 'Jungian Quiz' section is added for interactive self-assessment. The 'Concept Clarifier' section (LLM-powered) is positioned after the quiz. This structure prioritizes user-led discovery and breaks down complex information into manageable, engaging modules, which is more effective for a web-based interactive experience than the original report's dense, sequential format. -->
    <!-- Visualization & Content Choices:
        - Psyche Structure: Goal: Inform. Viz: Donut Chart (Chart.js). Interaction: Hover to see details. Justification: Visually represents the proportional relationship between conscious and unconscious levels.
        - Core Concepts/Archetypes: Goal: Organize. Viz: Interactive Cards (HTML/CSS/JS). Interaction: Click to reveal detailed information. Justification: Allows users to focus on one concept at a time, preventing information overload.
        - Jung vs. Freud: Goal: Compare. Viz: Two-column interactive layout (HTML/CSS/JS). Interaction: Buttons to switch between topics. Justification: More engaging and direct comparison than a static table.
        - Red Book Journey: Goal: Change/Process. Viz: Stylized timeline/path (HTML/CSS) with symbolic emoji nodes, now displaying placeholder images and their corresponding text descriptions. Interaction: Clickable nodes to show associated images and rich textual content. Justification: Transforms a list of chapters into an experiential journey, mirroring the theme of individuation, with both visual cues and detailed content for each stage.
        - Legacy Diagram: Goal: Relationships. Viz: HTML/CSS node diagram with symbolic emojis. Interaction: Hover effects to highlight connections. Justification: Visually demonstrates the wide-reaching influence of Jung's ideas in a more intuitive way than a list, using universally recognizable symbols.
        - Icons/Symbols: Goal: Inform/Engage. Viz: Unicode Emojis/Characters. Interaction: Static visual enhancement. Justification: Adds visual interest and quick contextual cues to section and card titles, improving scannability and aesthetic appeal without using raster images or SVG.
        - Jungian Quiz: Goal: Self-reflection/Engagement. Viz: Multiple-choice questions (HTML radio buttons) and text output for results (HTML Div). Interaction: User selects answers, clicks submit, receives personalized Jungian insights. Justification: Applies Jungian concepts to relatable scenarios, making the learning interactive and personal, guiding users to understand their current psychological tendencies. Positioned earlier for a more engaging initial interaction.
        - Jungian Concept Clarifier: Goal: Inform/Deepen Understanding. Viz: Text Output (HTML Div) powered by LLM. Interaction: User text input, button click to generate explanation. Justification: Provides on-demand, contextual explanations of complex Jungian terms, enhancing learning and exploration beyond predefined content, using Gemini API for dynamic content generation. Positioned after the quiz to follow the self-reflection with a knowledge-deepening tool.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #FDFBF6;
            color: #3C3633;
        }
        h1, h2, h3, h4, .font-serif {
            font-family: 'Noto Serif TC', serif;
        }
        .nav-link {
            transition: all 0.3s ease;
            position: relative;
        }
        .nav-link:hover {
            color: #A0522D;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -4px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #A0522D;
            transition: width 0.3s ease;
        }
        .nav-link:hover::after, .nav-link.active::after {
            width: 100%;
        }
        .card {
            background-color: #FFFFFF;
            border: 1px solid #E0DCD1;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .tab-button {
            transition: all 0.3s ease;
        }
        .tab-button.active {
            background-color: #A0522D;
            color: #FFFFFF;
            border-color: #A0522D;
        }
        .modal-overlay {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
        }
        .archetype-card {
            perspective: 1000px;
        }
        .archetype-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .archetype-card:hover .archetype-card-inner {
            transform: rotateY(180deg);
        }
        .archetype-card-front, .archetype-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 1rem;
            border-radius: 0.5rem;
        }
        .archetype-card-front {
            background-color: #F9F6EE;
            border: 1px solid #E0DCD1;
        }
        .archetype-card-back {
            background-color: #E0DCD1;
            transform: rotateY(180deg);
            overflow-y: auto;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 350px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .icon-container {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            background-color: #F0EEE9;
            margin-right: 0.5rem;
            font-size: 1.2rem;
            color: #A0522D;
            flex-shrink: 0;
        }
        .redbook-image-container {
            width: 100%;
            max-width: 800px; /* Adjusted for 3x6 horizontal, aiming for 2:1 aspect ratio */
            margin: 0 auto;
            aspect-ratio: 2 / 1; /* For 3x6, effectively 1:2 aspect ratio if it means 3 units height, 6 units width. Assuming standard horizontal photo aspect ratio, often 2:1 or 16:9. Let's go with 2:1 for now, as 3x6 literally isn't common. If 3:6 means 3 units high by 6 units wide, then aspect ratio is 6/3 = 2. */
            overflow: hidden; /* Ensure image doesn't overflow */
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .redbook-image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Cover the container while maintaining aspect ratio */
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-40 shadow-sm">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="font-serif text-2xl font-bold text-gray-800 flex items-center">
                <span class="icon-container mr-2">🧭</span> 榮格的心靈地圖
            </div>
            <div class="hidden md:flex space-x-8">
                <a href="#intro" class="nav-link text-gray-600">導論</a>
                <a href="#concepts" class="nav-link text-gray-600">核心概念</a>
                <a href="#freud-jung" class="nav-link text-gray-600">榮格與佛洛伊德</a>
                <a href="#redbook" class="nav-link text-gray-600">紅書之旅</a>
                <a href="#legacy" class="nav-link text-gray-600">影響與傳承</a>
                <a href="#jung-quiz" class="nav-link text-gray-600">心理測驗</a>
                <a href="#concept-clarifier" class="nav-link text-gray-600">AI 解析</a>
            </div>
            <button id="mobile-menu-button" class="md:hidden text-gray-700 focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4">
            <a href="#intro" class="block py-2 text-gray-600">導論</a>
            <a href="#concepts" class="block py-2 text-gray-600">核心概念</a>
            <a href="#freud-jung" class="block py-2 text-gray-600">榮格與佛洛伊德</a>
            <a href="#redbook" class="block py-2 text-gray-600">紅書之旅</a>
            <a href="#legacy" class="block py-2 text-gray-600">影響與傳承</a>
            <a href="#jung-quiz" class="block py-2 text-gray-600">心理測驗</a>
            <a href="#concept-clarifier" class="block py-2 text-gray-600">AI 解析</a>
        </div>
    </header>

    <main class="container mx-auto px-6 py-12">

        <section id="intro" class="text-center mb-24 scroll-mt-20">
            <h1 class="text-4xl md:text-5xl font-bold mb-4 flex items-center justify-center">
                <span class="icon-container mr-3 text-3xl">✨</span> 踏上自我探索的旅程
            </h1>
            <p class="text-lg text-gray-600 max-w-3xl mx-auto">
                歡迎來到榮格心理學的互動世界。本應用程式將帶您深入探索卡爾·榮格的革命性思想，從心靈的結構到神秘的《紅書》。這不僅是一趟知識之旅，更是一次與您內在自我的對話。
            </p>
        </section>

        <section id="concepts" class="mb-24 scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-4 font-serif flex items-center justify-center">
                <span class="icon-container mr-3 text-2xl">💡</span> 核心概念：建構心靈的基石
            </h2>
            <p class="text-center text-gray-600 max-w-2xl mx-auto mb-12">榮格的理論建立在一系列深刻的概念之上，它們共同描繪了一幅宏偉的心靈地圖。點擊下方的卡片，逐一探索這些構成我們內在世界的關鍵元素。</p>
            
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="card p-6 rounded-lg cursor-pointer flex flex-col items-center text-center" onclick="showModal('psyche')">
                    <span class="icon-container mb-3 text-3xl">🧩</span>
                    <h3 class="text-xl font-bold mb-2 font-serif">心靈結構</h3>
                    <p class="text-gray-600">意識、個人無意識與集體無意識，構成了我們心靈的三個層次。</p>
                </div>
                <div class="card p-6 rounded-lg cursor-pointer flex flex-col items-center text-center" onclick="showModal('archetypes')">
                    <span class="icon-container mb-3 text-3xl">🎭</span>
                    <h3 class="text-xl font-bold mb-2 font-serif">原型探索</h3>
                    <p class="text-gray-600">探索那些普遍存在於人類心靈深處的原始意象，如人格面具、陰影、阿尼瑪/阿尼姆斯。</p>
                </div>
                <div class="card p-6 rounded-lg cursor-pointer flex flex-col items-center text-center" onclick="showModal('individuation')">
                    <span class="icon-container mb-3 text-3xl">🌱</span>
                    <h3 class="text-xl font-bold mb-2 font-serif">個體化歷程</h3>
                    <p class="text-gray-600">一場終生的心靈整合之旅，目標是成為一個完整、真實的自己。</p>
                </div>
                <div class="card p-6 rounded-lg cursor-pointer flex flex-col items-center text-center" onclick="showModal('dreams')">
                    <span class="icon-container mb-3 text-3xl">🔮</span>
                    <h3 class="text-xl font-bold mb-2 font-serif">夢境與象徵</h3>
                    <p class="text-gray-600">夢是通往無意識的輝煌大道，充滿了來自內心深處的象徵與指引。</p>
                </div>
                <div class="card p-6 rounded-lg cursor-pointer flex flex-col items-center text-center" onclick="showModal('types')">
                    <span class="icon-container mb-3 text-3xl">⚖️</span>
                    <h3 class="text-xl font-bold mb-2 font-serif">心理類型</h3>
                    <p class="text-gray-600">內傾與外傾，思維、情感、感官與直覺，構成了我們理解世界的獨特方式。</p>
                </div>
                 <div class="card p-6 rounded-lg cursor-pointer flex flex-col items-center text-center" onclick="showModal('libido')">
                    <span class="icon-container mb-3 text-3xl">⚡</span>
                    <h3 class="text-xl font-bold mb-2 font-serif">力比多 (Libido)</h3>
                    <p class="text-gray-600">不僅是性驅力，而是一種驅動所有心靈活動的廣泛心理能量。</p>
                </div>
            </div>
        </section>

        <section id="freud-jung" class="mb-24 scroll-mt-20 bg-white p-8 rounded-lg shadow-lg">
            <h2 class="text-3xl font-bold text-center mb-4 font-serif flex items-center justify-center">
                <span class="icon-container mr-3 text-2xl">🆚</span> 思想的岔路：榮格 vs. 佛洛伊德
            </h2>
            <p class="text-center text-gray-600 max-w-2xl mx-auto mb-12">榮格與佛洛伊德的合作與決裂是20世紀心理學史上的重大事件。他們的思想分歧，為深度心理學開創了兩條截然不同的道路。點擊下方按鈕，比較他們在核心議題上的觀點差異。</p>
            <div id="comparison-container" class="grid md:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-2xl font-bold mb-4 text-center font-serif">佛洛伊德的精神分析</h3>
                    <div id="freud-content" class="p-6 bg-gray-50 rounded-lg min-h-[200px]"></div>
                </div>
                <div>
                    <h3 class="text-2xl font-bold mb-4 text-center font-serif">榮格的分析心理學</h3>
                    <div id="jung-content" class="p-6 bg-gray-50 rounded-lg min-h-[200px]"></div>
                </div>
            </div>
             <div class="flex justify-center flex-wrap gap-4 mt-8">
                <button class="comparison-btn tab-button border border-gray-300 px-4 py-2 rounded-full" data-topic="unconscious">無意識</button>
                <button class="comparison-btn tab-button border border-gray-300 px-4 py-2 rounded-full" data-topic="libido">力比多</button>
                <button class="comparison-btn tab-button border border-gray-300 px-4 py-2 rounded-full" data-topic="dreams">夢的解釋</button>
                <button class="comparison-btn tab-button border border-gray-300 px-4 py-2 rounded-full" data-topic="religion">宗教與神話</button>
            </div>
        </section>

        <section id="redbook" class="mb-24 scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-4 font-serif flex items-center justify-center">
                <span class="icon-container mr-3 text-2xl">📖</span> 《紅書》：一場靈魂的冒險
            </h2>
            <p class="text-center text-gray-600 max-w-2xl mx-auto mb-12">《紅書》是榮格在個人危機中，與自己無意識進行深刻對話的記錄。它不僅是一本書，更是他所有核心理論的誕生地。點擊旅程中的節點，探索這趟非凡的內在探索。</p>
            <div class="relative w-full py-12">
                <div class="absolute top-1/2 left-0 w-full h-1 bg-gray-300 transform -translate-y-1/2"></div>
                <div class="relative flex justify-between items-center">
                    <div class="redbook-node text-center cursor-pointer" data-content="redbook_spirit">
                        <div class="w-10 h-10 bg-white border-2 border-amber-700 rounded-full mx-auto flex items-center justify-center text-2xl transform transition-transform duration-200 ease-in-out hover:scale-110">💭</div>
                        <p class="mt-2 text-sm font-semibold">時代與深度精神</p>
                    </div>
                    <div class="redbook-node text-center cursor-pointer" data-content="redbook_hero">
                        <div class="w-10 h-10 bg-white border-2 border-amber-700 rounded-full mx-auto flex items-center justify-center text-2xl transform transition-transform duration-200 ease-in-out hover:scale-110">⚔️</div>
                        <p class="mt-2 text-sm font-semibold">英雄之死</p>
                    </div>
                    <div class="redbook-node text-center cursor-pointer" data-content="redbook_redman">
                        <div class="w-10 h-10 bg-white border-2 border-amber-700 rounded-full mx-auto flex items-center justify-center text-2xl transform transition-transform duration-200 ease-in-out hover:scale-110">👤</div>
                        <p class="mt-2 text-sm font-semibold">紅人</p>
                    </div>
                    <div class="redbook-node text-center cursor-pointer" data-content="redbook_fool">
                        <div class="w-10 h-10 bg-white border-2 border-amber-700 rounded-full mx-auto flex items-center justify-center text-2xl transform transition-transform duration-200 ease-in-out hover:scale-110">🃏</div>
                        <p class="mt-2 text-sm font-semibold">神聖愚者</p>
                    </div>
                    <div class="redbook-node text-center cursor-pointer" data-content="redbook_individuation">
                        <div class="w-10 h-10 bg-white border-2 border-amber-700 rounded-full mx-auto flex items-center justify-center text-2xl transform transition-transform duration-200 ease-in-out hover:scale-110">🌟</div>
                        <p class="mt-2 text-sm font-semibold">個體化實踐</p>
                    </div>
                </div>
            </div>
            <div id="redbook-content" class="mt-12 p-8 bg-white rounded-lg shadow-inner min-h-[250px] text-gray-700 leading-relaxed text-center">
                <p class="text-center text-gray-500">點擊上方的旅程節點以開始探索。</p>
            </div>
        </section>

        <section id="legacy" class="mb-24 scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-4 font-serif flex items-center justify-center">
                <span class="icon-container mr-3 text-2xl">🌍</span> 跨領域的影響與傳承
            </h2>
            <p class="text-center text-gray-600 max-w-2xl mx-auto mb-12">榮格的思想超越了心理學，深刻地影響了神話學、藝術、文學和電影。以下圖示展現了其部分影響力，將滑鼠懸停在節點上查看關聯。</p>
            <div class="grid md:grid-cols-3 gap-8 text-center">
                <div class="card p-6 rounded-lg flex flex-col items-center text-center">
                    <span class="icon-container mb-3 text-3xl">📜</span>
                    <h3 class="text-xl font-bold mb-2 font-serif">神話學</h3>
                    <p class="text-gray-600">約瑟夫·坎伯的「英雄之旅」模型，深受榮格原型理論的啟發。</p>
                </div>
                <div class="card p-6 rounded-lg flex flex-col items-center text-center">
                    <span class="icon-container mb-3 text-3xl">🎬</span>
                    <h3 class="text-xl font-bold mb-2 font-serif">電影與文學</h3>
                    <p class="text-gray-600">從《星際大戰》到《獅子王》，無數故事都遵循著英雄原型的敘事結構。</p>
                </div>
                <div class="card p-6 rounded-lg flex flex-col items-center text-center">
                    <span class="icon-container mb-3 text-3xl">🎨</span>
                    <h3 class="text-xl font-bold mb-2 font-serif">藝術與治療</h3>
                    <p class="text-gray-600">超現實主義與藝術治療都從榮格對夢境、神話、無意識的興趣啟發，透過自發性創作表達內在世界。</p>
                </div>
            </div>
        </section>

        <section id="jung-quiz" class="mb-24 scroll-mt-20 bg-white p-8 rounded-lg shadow-lg">
            <h2 class="text-3xl font-bold text-center mb-4 font-serif flex items-center justify-center">
                <span class="icon-container mr-3 text-2xl">🔍</span> 榮格心靈測驗：探索你的內在狀態
            </h2>
            <p class="text-center text-gray-600 max-w-2xl mx-auto mb-8">透過幾個日常情境問題，探索你目前的心靈能量更傾向於榮格的哪個概念，這將幫助你更好地理解自己與關係。</p>

            <div id="quiz-questions" class="space-y-8 max-w-xl mx-auto">
                <div class="quiz-question bg-gray-50 p-6 rounded-lg">
                    <p class="font-bold mb-4">1. 當你在新環境中與人初次見面時，你的表現傾向於？</p>
                    <div class="space-y-2">
                        <label class="block p-3 border border-gray-200 rounded-md cursor-pointer hover:bg-gray-100">
                            <input type="radio" name="q1" value="persona" class="mr-2"> 展現出大家可能喜歡的樣子，希望給人留下好印象。
                        </label>
                        <label class="block p-3 border border-gray-200 rounded-md cursor-pointer hover:bg-gray-100">
                            <input type="radio" name="q1" value="animaAnimus" class="mr-2"> 比較被動，等待對方先展現他們的真實性格。
                        </label>
                        <label class="block p-3 border border-gray-200 rounded-md cursor-pointer hover:bg-gray-100">
                            <input type="radio" name="q1" value="individuation" class="mr-2"> 自然而然地展現自己的個性，不會刻意迎合。
                        </label>
                    </div>
                </div>

                <div class="quiz-question bg-gray-50 p-6 rounded-lg">
                    <p class="font-bold mb-4">2. 你和伴侶或家人產生爭執時，最可能出現的心態是？</p>
                    <div class="space-y-2">
                        <label class="block p-3 border border-gray-200 rounded-md cursor-pointer hover:bg-gray-100">
                            <input type="radio" name="q2" value="persona" class="mr-2"> 感到對方不講理，難以接受其「陰暗面」。
                        </label>
                        <label class="block p-3 border border-gray-200 rounded-md cursor-pointer hover:bg-gray-100">
                            <input type="radio" name="q2" value="animaAnimus" class="mr-2"> 覺得對方的情緒化難以捉摸，或無法理解對方的「邏輯」。
                        </label>
                        <label class="block p-3 border border-gray-200 rounded-md cursor-pointer hover:bg-gray-100">
                            <input type="radio" name="q2" value="individuation" class="mr-2"> 雖然有情緒，但會嘗試理解爭執背後更深層次的個人需求或未被看見的自己。
                        </label>
                    </div>
                </div>

                <div class="quiz-question bg-gray-50 p-6 rounded-lg">
                    <p class="font-bold mb-4">3. 在面對自己「不完美」的特質（如：懶惰、衝動）時，你會怎麼做？</p>
                    <div class="space-y-2">
                        <label class="block p-3 border border-gray-200 rounded-md cursor-pointer hover:bg-gray-100">
                            <input type="radio" name="q3" value="persona" class="mr-2"> 盡力掩飾，或歸咎於外在因素。
                        </label>
                        <label class="block p-3 border border-gray-200 rounded-md cursor-pointer hover:bg-gray-100">
                            <input type="radio" name="q3" value="animaAnimus" class="mr-2"> 感到矛盾或困惑，不確定如何處理這種內在衝突。
                        </label>
                        <label class="block p-3 border border-gray-200 rounded-md cursor-pointer hover:bg-gray-100">
                            <input type="radio" name="q3" value="individuation" class="mr-2"> 承認這是自己的一部分，並思考它可能蘊含的未開發潛能。
                        </label>
                    </div>
                </div>

                <div class="quiz-question bg-gray-50 p-6 rounded-lg">
                    <p class="font-bold mb-4">4. 在親密關係中，你是否常感覺到對方身上有股難以言喻的吸引力或排斥力，讓你聯想到某些特定的人或故事？</p>
                    <div class="space-y-2">
                        <label class="block p-3 border border-gray-200 rounded-md cursor-pointer hover:bg-gray-100">
                            <input type="radio" name="q4" value="persona" class="mr-2"> 有時會有，但認為那只是偶然的巧合或個人喜好。
                        </label>
                        <label class="block p-3 border border-gray-200 rounded-md cursor-pointer hover:bg-gray-100">
                            <input type="radio" name="q4" value="animaAnimus" class="mr-2"> 是的，我感覺到那是某種「命中注定」或內在的深刻連結。
                        </label>
                        <label class="block p-3 border border-gray-200 rounded-md cursor-pointer hover:bg-gray-100">
                            <input type="radio" name="q4" value="individuation" class="mr-2"> 我更注重關係中的實際溝通和共同成長，而非神秘的吸引力。
                        </label>
                    </div>
                </div>

                <div class="quiz-question bg-gray-50 p-6 rounded-lg">
                    <p class="font-bold mb-4">5. 當你感到生活中缺乏意義或方向時，你會？</p>
                    <div class="space-y-2">
                        <label class="block p-3 border border-gray-200 rounded-md cursor-pointer hover:bg-gray-100">
                            <input type="radio" name="q5" value="persona" class="mr-2"> 努力尋找新的外部目標或成就來填補空虛。
                        </label>
                        <label class="block p-3 border border-gray-200 rounded-md cursor-pointer hover:bg-gray-100">
                            <input type="radio" name="q5" value="animaAnimus" class="mr-2"> 常常感到迷茫或焦慮，不知所措。
                        </label>
                        <label class="block p-3 border border-gray-200 rounded-md cursor-pointer hover:bg-gray-100">
                            <input type="radio" name="q5" value="individuation" class="mr-2"> 嘗試向內探索，思考自己的深層渴望和價值觀，或從夢中尋找啟示。
                        </label>
                    </div>
                </div>
            </div>

            <div class="flex justify-center mt-8">
                <button id="submit-quiz-button" class="bg-amber-700 text-white px-8 py-3 rounded-full hover:bg-amber-800 transition-colors duration-300 shadow-md">
                    查看你的心靈狀態
                </button>
            </div>

            <div id="quiz-result" class="mt-12 p-8 bg-gray-100 rounded-lg shadow-inner min-h-[150px] text-gray-700 leading-relaxed hidden">
                <h3 class="text-2xl font-bold font-serif text-center mb-4" id="result-title"></h3>
                <p class="text-center text-gray-600 mb-6" id="result-summary"></p>
                <div id="result-details" class="space-y-4"></div>
            </div>
        </section>

        <section id="concept-clarifier" class="mb-24 scroll-mt-20 bg-white p-8 rounded-lg shadow-lg">
            <h2 class="text-3xl font-bold text-center mb-4 font-serif flex items-center justify-center">
                <span class="icon-container mr-3 text-2xl">🧠</span> 榮格概念解析器 ✨
            </h2>
            <p class="text-center text-gray-600 max-w-2xl mx-auto mb-8">在這裡輸入任何您想深入了解的榮格心理學概念，AI 將為您提供詳細的解釋和實用案例。</p>
            <div class="flex flex-col items-center space-y-4">
                <textarea id="clarifier-input" class="w-full max-w-xl p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-700" rows="5" placeholder="例如：什麼是原型？個體化歷程有什麼意義？"></textarea>
                <button id="clarifier-button" class="bg-amber-700 text-white px-8 py-3 rounded-full hover:bg-amber-800 transition-colors duration-300 shadow-md flex items-center justify-center">
                    <span id="clarifier-button-text">解析概念</span>
                    <span id="clarifier-loading" class="hidden ml-2">載入中...</span>
                </button>
                <div id="clarifier-output" class="w-full max-w-xl p-6 bg-gray-50 rounded-lg mt-6 min-h-[150px] text-gray-700 leading-relaxed overflow-auto">
                    <p class="text-center text-gray-500">解析結果將顯示於此。</p>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-6 text-center">
            <p>此互動應用程式根據提供的「榮格心理學學習筆記」報告生成。</p>
            <p class="text-sm text-gray-400 mt-2">僅供教育與探索之用。</p>
        </div>
    </footer>

    <div id="modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden">
        <div class="modal-content bg-white rounded-lg shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto p-8 transform scale-95">
            <div class="flex justify-between items-center mb-6">
                <h3 id="modal-title" class="text-2xl font-bold font-serif"></h3>
                <button onclick="closeModal()" class="text-gray-500 hover:text-gray-800">&times;</button>
            </div>
            <div id="modal-body" class="text-gray-700 leading-relaxed space-y-4"></div>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    mobileMenuButton.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
    });

    const navLinks = document.querySelectorAll('.nav-link');
    const sections = document.querySelectorAll('main section');

    window.addEventListener('scroll', () => {
        let current = '';
        sections.forEach(section => {
            const sectionTop = section.offsetTop;
            if (pageYOffset >= sectionTop - 100) {
                current = section.getAttribute('id');
            }
        });

        navLinks.forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('href').includes(current)) {
                link.classList.add('active');
            }
        });
    });

    const comparisonData = {
        unconscious: {
            freud: '<h3>個人無意識</h3><p>主要為被壓抑的驅力、記憶和情感。這些內容曾經是意識的，或是可以被意識化的。</p>',
            jung: '<h3>個人 + 集體無意識</h3><p>除了個人被壓抑的內容，更提出了集體無意識的概念，包含了人類共同繼承的、普遍存在的原型與心理結構。</p>'
        },
        libido: {
            freud: '<h3>性驅力</h3><p>將力比多主要解釋為性驅力，是所有心理活動的根本動力。</p>',
            jung: '<h3>廣泛的心理能量</h3><p>認為力比多是一種更廣泛、自由流動的心理能量，不僅限於性，驅動著所有心靈活動。</p>'
        },
        dreams: {
            freud: '<h3>願望的滿足</h3><p>認為夢是潛意識願望的偽裝性滿足，特別是關於性與攻擊性的驅力。</p>',
            jung: '<h3>補償性作用</h3><p>認為夢是無意識對意識的補償，旨在平衡心靈，促進個體化，是通往無意識的橋樑。</p>'
        },
        religion: {
            freud: '<h3>幻覺</h3><p>拒絕宗教，將其視為一種集體的神經症或幻覺，是無助的人類對強大父親形象的投射。</p>',
            jung: '<h3>集體無意識的表達</h3><p>對宗教和神話抱持極大興趣，認為它們是集體無意識原型的自然表達，是人類尋求意義的重要途徑。</p>'
        }
    };

    const freudContent = document.getElementById('freud-content');
    const jungContent = document.getElementById('jung-content');
    const comparisonBtns = document.querySelectorAll('.comparison-btn');

    function updateComparison(topic) {
        freudContent.innerHTML = comparisonData[topic].freud;
        jungContent.innerHTML = comparisonData[topic].jung;
        comparisonBtns.forEach(btn => {
            btn.classList.remove('active');
            if (btn.dataset.topic === topic) {
                btn.classList.add('active');
            }
        });
    }

    comparisonBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            updateComparison(btn.dataset.topic);
        });
    });

    updateComparison('unconscious');

    const redbookNodes = document.querySelectorAll('.redbook-node');
    const redbookContent = document.getElementById('redbook-content');
    const redbookData = {
        redbook_spirit: {
            title: '時代精神 vs. 深度精神',
            imageUrl: 'https://placehold.co/800x400/B1A296/FFFFFF?text=紅書章節1：時代與深度精神',
            text: '<p>榮格區分了兩種經驗維度：「時代精神」代表我們外在、理性、不斷變化的社會規範；而「深度精神」則是內在、永恆、超越時間的無意識世界。榮格認為，要尋回失落的靈魂，必須潛入「深度精神」，傾聽來自內在的聲音，而非盲目追隨外部世界的價值。</p>'
        },
        redbook_hero: {
            title: '英雄之死',
            imageUrl: 'https://placehold.co/800x400/A0522D/FFFFFF?text=紅書章節2：英雄之死',
            text: '<p>這並非指實際的死亡，而是象徵著「自我」的轉化。過度認同堅定、專一的「英雄」原型，會讓我們變得僵化。因此，必須在心理上「殺死」這個英雄，放下小我的控制慾，才能讓更完整、更真實的「自性」誕生。這是一種臣服的智慧，是整合內在對立面的前提。</p>'
        },
        redbook_redman: {
            title: '紅人與內在指引',
            imageUrl: 'https://placehold.co/800x400/7395AE/FFFFFF?text=紅書章節3：紅人',
            text: '<p>在《紅書》的旅程中，榮格遇到了許多來自無意識的形象，如「紅人」。這些形象不僅是象徵，更被他體驗為活生生的、自主的嚮導。他透過「積極想像」與這些內在形象對話，從中獲得指引。這表明無意識是一個充滿智慧、能夠引導意識的活躍領域。</p>'
        },
        redbook_fool: {
            title: '神聖愚者',
            imageUrl: 'https://placehold.co/800x400/B1A296/FFFFFF?text=紅書章節4：神聖愚者',
            text: '<p>「神聖愚者」原型代表一種超越世俗邏輯的智慧。他們看似天真、不合時宜，卻能說出最根本的真相。這個形象提醒我們，真正的洞察力往往來自於心，而非理智，需要我們擁抱脆弱與不確定性，挑戰社會的偽善與僵化。</p>'
        },
        redbook_individuation: {
            title: '個體化的實踐',
            imageUrl: 'https://placehold.co/800x400/A0522D/FFFFFF?text=紅書章節5：個體化實踐',
            text: '<p>《紅書》的整個創作過程，就是榮格個體化歷程的生動展現。它證明了榮格的理論並非空想，而是源於他個人深刻、痛苦卻極富創造性的靈魂探索。這部作品是他所有核心概念（如原型、集體無意識）的試驗場與誕生地。</p>'
        }
    };
    redbookNodes.forEach(node => {
        node.addEventListener('click', () => {
            const contentKey = node.dataset.content;
            const data = redbookData[contentKey];
            redbookContent.innerHTML = `
                <h4 class="text-xl font-bold mb-4 font-serif text-center">${data.title}</h4>
                <div class="redbook-image-container mb-4">
                    <img src="${data.imageUrl}" alt="${data.title}">
                </div>
                <p class="text-gray-700 leading-relaxed text-center">${data.text}</p>
            `;
            redbookNodes.forEach(n => n.querySelector('div').classList.remove('bg-amber-700', 'text-white'));
            node.querySelector('div').classList.add('bg-amber-700', 'text-white');
        });
    });

    // Gemini API Integration for Concept Clarifier
    const clarifierInput = document.getElementById('clarifier-input');
    const clarifierButton = document.getElementById('clarifier-button');
    const clarifierButtonText = document.getElementById('clarifier-button-text');
    const clarifierLoading = document.getElementById('clarifier-loading');
    const clarifierOutput = document.getElementById('clarifier-output');

    clarifierButton.addEventListener('click', async () => {
        const promptText = clarifierInput.value.trim();
        if (!promptText) {
            clarifierOutput.innerHTML = '<p class="text-red-500 text-center">請輸入您想查詢的概念。</p>';
            return;
        }

        clarifierButton.disabled = true;
        clarifierButtonText.classList.add('hidden');
        clarifierLoading.classList.remove('hidden');
        clarifierOutput.innerHTML = '<p class="text-center text-gray-500">正在解析，請稍候...</p>';

        const userPrompt = `以榮格心理學的角度，詳細解釋並提供生活應用案例：${promptText}`;
        let chatHistory = [];
        chatHistory.push({ role: "user", parts: [{ text: userPrompt }] });
        const payload = { contents: chatHistory };
        const apiKey = "AIzaSyA9qbZE51ZJPaHF4N7H4vsUBmwkU6cXvBA"; // If you want to use models other than gemini-2.5-flash-preview-05-20 or imagen-3.0-generate-002, provide an API key here. Otherwise, leave this as-is.
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

        let retries = 0;
        const maxRetries = 5;
        let delay = 1000; // 1 second

        while (retries < maxRetries) {
            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    if (response.status === 429) { // Too Many Requests
                        retries++;
                        await new Promise(res => setTimeout(res, delay));
                        delay *= 2; // Exponential backoff
                        continue;
                    }
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    clarifierOutput.innerHTML = `<p>${text.replace(/\n/g, '<br>')}</p>`;
                } else {
                    clarifierOutput.innerHTML = '<p class="text-red-500 text-center">抱歉，無法解析該概念。請嘗試其他問題。</p>';
                }
                break; // Success, exit retry loop
            } catch (error) {
                console.error('Error calling Gemini API:', error);
                if (retries < maxRetries - 1) {
                    retries++;
                    await new Promise(res => setTimeout(res, delay));
                    delay *= 2;
                } else {
                    clarifierOutput.innerHTML = `<p class="text-red-500 text-center">發生錯誤：${error.message}。請稍後再試。</p>`;
                }
            }
        }
        
        clarifierButton.disabled = false;
        clarifierButtonText.classList.remove('hidden');
        clarifierLoading.classList.add('hidden');
    });

    // Jungian Quiz Logic
    const submitQuizButton = document.getElementById('submit-quiz-button');
    const quizResultDiv = document.getElementById('quiz-result');
    const resultTitle = document.getElementById('result-title');
    const resultSummary = document.getElementById('result-summary');
    const resultDetails = document.getElementById('result-details');

    submitQuizButton.addEventListener('click', () => {
        let personaScore = 0;
        let animaAnimusScore = 0;
        let individuationScore = 0;

        const questions = ['q1', 'q2', 'q3', 'q4', 'q5'];
        let allAnswered = true;

        questions.forEach(qName => {
            const selectedOption = document.querySelector(`input[name="${qName}"]:checked`);
            if (!selectedOption) {
                allAnswered = false;
                return;
            }
            const value = selectedOption.value;
            if (value === 'persona') {
                personaScore++;
            } else if (value === 'animaAnimus') {
                animaAnimusScore++;
            } else if (value === 'individuation') {
                individuationScore++;
            }
        });

        if (!allAnswered) {
            quizResultDiv.classList.remove('hidden');
            resultTitle.textContent = '請完成所有問題！';
            resultSummary.textContent = '請確保您回答了所有問題後再提交。';
            resultDetails.innerHTML = '';
            return;
        }

        const scores = {
            persona: personaScore,
            animaAnimus: animaAnimusScore,
            individuation: individuationScore
        };

        let primaryArchetype = 'mixed'; // Default to mixed if no clear winner

        // Logic to determine primary archetype, prioritizing individuation > animaAnimus > persona
        if (individuationScore > personaScore && individuationScore > animaAnimusScore) {
            primaryArchetype = 'individuation';
        } else if (animaAnimusScore > personaScore && animaAnimusScore >= individuationScore) {
            primaryArchetype = 'animaAnimus';
        } else if (personaScore >= individuationScore && personaScore >= animaAnimusScore) {
            primaryArchetype = 'persona';
        } else if (individuationScore === personaScore && individuationScore === animaAnimusScore) {
            primaryArchetype = 'mixed'; // All tied
        }


        let title = '';
        let summary = '';
        let details = '';

        if (primaryArchetype === 'persona') {
            title = '🎭 人格面具與陰影的探索階段 👤';
            summary = '你的心靈能量目前可能更多地投入在社會適應，或正在面對那些你尚未完全接納的內在特質。';
            details = `
                <p><strong>你的心靈舞台：</strong> 你目前可能正處於榮格所說的「<strong>人格面具 (Persona)</strong>」階段，或正被「<strong>陰影 (Shadow)</strong>」所影響。這意味著你可能在社交互動中傾向於展現符合期望的形象，或在面對不喜歡的特質時選擇壓抑。</p>
                <p>榮格認為，陰影並非完全負面，它蘊含著你未開發的巨大潛能。過度認同人格面具可能導致內在的失衡。</p>
                <p><strong>下一步：</strong> 《紅書》強調「<strong>英雄之死</strong>」，即放下小我的控制。嘗試勇敢地直面那些你壓抑或不願承認的特質，將它們整合，而非推開。這是一個獲得更完整自我的必經之路。試著對自己更誠實，擁抱你的「不完美」，你會發現更大的力量。</p>
            `;
        } else if (primaryArchetype === 'animaAnimus') {
            title = '💞 阿尼瑪/阿尼姆斯與關係動力 💑';
            summary = '你在親密關係中可能正經歷著內在異性原型的投射與互動，這是理解深層連結的關鍵。';
            details = `
                <p><strong>你的心靈舞台：</strong> 你目前可能正處於與「<strong>阿尼瑪 (Anima)</strong>」（男性潛意識中的女性形象）或「<strong>阿尼姆斯 (Animus)</strong>」（女性潛意識中的男性形象）互動的階段。這可能表現為在親密關係中，你特別容易被某些特質吸引或排斥，或感覺對方難以理解。這些其實是你內在異性原型的投射。</p>
                <p>阿尼瑪/阿尼姆斯是我們內在的「異性」形象，深刻影響著我們的愛情關係與情感投射。理解這些投射有助於將關係從外在互動轉向內在成長。</p>
                <p><strong>下一步：</strong> 榮格強調「<strong>整合阿尼瑪/阿尼姆斯</strong>」。試著理解你對他人投射的這些特質，它們是你內在尚未被意識到的部分。當你能認識並整合這些內在異性形象時，你的親密關係將會更加深刻與和諧，你也能更真實地認識自己與他人。</p>
            `;
        } else if (primaryArchetype === 'individuation') {
            title = '🌟 個體化歷程：走向完整的自我 🌳';
            summary = '你正積極踏上自我整合的旅程，努力成為一個完整而真實的自己。';
            details = `
                <p><strong>你的心靈舞台：：</strong> 恭喜你！你目前正積極地踏上「<strong>個體化歷程 (Individuation)</strong>」的道路，並正在與你的「<strong>自性 (Self)</strong>」建立連結。這意味著你正在努力整合意識與無意識的各個層面，追求成為一個完整、真實的自己，而非僅僅是社會期望下的角色。</p>
                <p>個體化是榮格心理學的核心目標，是一個人終其一生，努力成為他/她真正自己的過程。這是一個需要勇氣、誠實與持續努力的旅程。</p>
                <p><strong>下一步：</strong> 你的旅程與榮格在《紅書》中探索「<strong>深度精神</strong>」的過程相似。保持開放，持續向內探索，聆聽內在的聲音和夢境的啟示。這是一個終生的過程，最終將帶來更堅強、安心與輕鬆的生命狀態。繼續相信你的內在智慧，它會引導你。</p>
            `;
        } else { // Mixed or tied
             title = '🌀 你的心靈狀態：多元探索中 🗺️';
             summary = '你的心靈旅程正在多個層面展開，同時觸及了多個榮格概念的議題。';
             details = `
                <p><strong>你的心靈舞台：</strong> 你的心靈旅程正在多個層面展開，同時觸及了「<strong>人格面具 (Persona)</strong>」、「<strong>陰影 (Shadow)</strong>」、「<strong>阿尼瑪/阿尼姆斯 (Anima/Animus)</strong>」與「<strong>個體化歷程 (Individuation)</strong>」的議題。這表示你的內在正在經歷豐富的整合與探索，沒有單一的概念能完全定義你目前的狀態。</p>
                <p>榮格的分析心理學鼓勵我們與心靈的各個部分對話。這種多元的狀態是個體化歷程中常見的。每個面向都提供了獨特的成長機會。</p>
                <p><strong>下一步：</strong> 繼續觀察你在關係中的模式，勇於面對內在的不完美，並聆聽你內心的深層渴望。你正在朝著更完整的自己邁進。記住，旅程本身就是意義的一部分。</p>
            `;
        }

        resultTitle.textContent = title;
        resultSummary.textContent = summary;
        resultDetails.innerHTML = details;
        quizResultDiv.classList.remove('hidden');

        // Scroll to results
        quizResultDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
    });
});

const modal = document.getElementById('modal');
const modalTitle = document.getElementById('modal-title');
const modalBody = document.getElementById('modal-body');

const modalData = {
    psyche: {
        title: '心靈的三個層次',
        content: `
            <p>榮格將人類心靈比作一座島嶼，分為三個層次：</p>
            <div class="chart-container my-6">
                <canvas id="psycheChart"></canvas>
            </div>
            <ul class="space-y-4">
                <li><strong>意識 (Conscious):</strong> 如同島嶼露出水面的部分，是我們能直接感知和思考的領域。</li>
                <li><strong>個人無意識 (Personal Unconscious):</strong> 水面下的部分，包含了被遺忘的記憶、被壓抑的經驗和個人「情結」。</li>
                <li><strong>集體無意識 (Collective Unconscious):</strong> 最深層的海床，是全人類共同繼承的心理遺產，儲存著普世的「原型」。</li>
            </ul>
        `
    },
    archetypes: {
        title: '原型：內在的普遍模式',
        content: `
            <p>原型是集體無意識中的原始意象，是塑造我們思想和行為的先天傾向。它們在所有文化的神話、傳說和夢境中反覆出現。以下是幾個核心原型：</p>
            <div class="grid md:grid-cols-2 gap-6 mt-6">
                <div class="archetype-card h-64">
                    <div class="archetype-card-inner">
                        <div class="archetype-card-front"><h4 class="text-xl font-bold font-serif">人格面具 (Persona)</h4><p class="text-sm text-gray-500">(懸停查看詳情)</p></div>
                        <div class="archetype-card-back text-sm"><p>我們為了適應社會而戴上的「面具」，是我們向外界展示的公共形象。它有其必要性，但過度認同它會讓我們失去真實的自我。</p></div>
                    </div>
                </div>
                <div class="archetype-card h-64">
                    <div class="archetype-card-inner">
                        <div class="archetype-card-front"><h4 class="text-xl font-bold font-serif">陰影 (Shadow)</h4><p class="text-sm text-gray-500">(懸停查看詳情)</p></div>
                        <div class="archetype-card-back text-sm"><p>我們不願承認、被壓抑的「黑暗面」。它既是問題的來源，也蘊藏著巨大的生命能量。整合陰影是通往完整的必經之路。</p></div>
                    </div>
                </div>
                <div class="archetype-card h-64">
                    <div class="archetype-card-inner">
                        <div class="archetype-card-front"><h4 class="text-xl font-bold font-serif">阿尼瑪/阿尼姆斯</h4><p class="text-sm text-gray-500">(懸停查看詳情)</p></div>
                        <div class="archetype-card-back text-sm"><p>我們內在的「異性」形象。男性的阿尼瑪（女性意象）和女性的阿尼姆斯（男性意象）深刻影響著我們的愛情關係與情感投射。</p></div>
                    </div>
                </div>
                <div class="archetype-card h-64">
                    <div class="archetype-card-inner">
                        <div class="archetype-card-front"><h4 class="text-xl font-bold font-serif">自性 (Self)</h4><p class="text-sm text-gray-500">(懸停查看詳情)</p></div>
                        <div class="archetype-card-back text-sm"><p>人格的中心與整體，是整合了意識與無意識的終極目標。它代表著心靈的完整與統一，是個體化歷程所追求的終點。</p></div>
                    </div>
                </div>
            </div>
        `
    },
    individuation: {
        title: '個體化歷程：成為你自己',
        content: `
            <p>個體化是榮格心理學的核心目標，是一個人終其一生，努力成為他/她真正自己的過程。這不是追求完美，而是達成心靈的完整。</p>
            <p>這個歷程被形容為一個「去而復返」的故事：</p>
            <ol class="list-decimal list-inside space-y-2 mt-4">
                <li><strong>分化:</strong> 意識自我從集體中分化出來，發展出獨特的個性。</li>
                <li><strong>面對陰影:</strong> 承認並整合自己不願接受的黑暗面。</li>
                <li><strong>整合阿尼瑪/阿尼姆斯:</strong> 與內在的異性原型建立關係，而非將其投射到伴侶身上。</li>
                <li><strong>與自性連結:</strong> 最終，意識與無意識達成和解與平衡，個體的人格圍繞著「自性」這個新的中心重新組織。</li>
            </ol>
            <p class="mt-4">這是一個需要勇氣、誠實與持續努力的旅程，其最終的回報是獲得一種更堅強、安心、輕鬆的生命狀態。</p>
        `
    },
    dreams: {
        title: '夢境與象徵：無意識的語言',
        content: `
            <p>榮格認為夢是「通往無意識的輝煌大道」，是心靈自我療癒與平衡的重要機制。與佛洛伊德不同，榮格不認為夢只是被壓抑願望的偽裝。</p>
            <ul class="list-disc list-inside space-y-2 mt-4">
                <li><strong>補償作用:</strong> 當我們的意識態度過於片面或僵化時，夢會以象徵性的方式呈現出被忽略的另一面，以恢復心靈的平衡。</li>
                <li><strong>象徵的意義:</strong> 夢中的意象是「象徵」，它們不僅指向過去，更指向未來的可能性。象徵是連接意識與無意識的橋樑。</li>
                <li><strong>超越功能:</strong> 透過與夢中象徵的互動（如積極想像、藝術創作），我們可以整合意識與無意識的對立，產生新的洞見與生命態度，這就是「超越功能」。</li>
            </ul>
            <p class="mt-4">因此，認真對待我們的夢境，就是傾聽來自內心深處的智慧與指引。</p>
        `
    },
    types: {
        title: '心理類型：理解差異的框架',
        content: `
            <p>榮格提出了理解個體差異的經典框架，幫助我們認識自己和他人處理世界的方式。主要分為兩種態度類型和四種功能類型。</p>
            <h4 class="font-bold mt-4 mb-2 font-serif">兩種態度類型：</h4>
            <ul class="list-disc list-inside space-y-2">
                <li><strong>外傾 (Extraversion):</strong> 心理能量流向外部世界。外傾者從與人、事、物的互動中獲得能量，關注客觀現實。</li>
                <li><strong>內傾 (Introversion):</strong> 心理能量流向內在世界。內傾者從獨處、反思中獲得能量，關注主觀體驗與意義。</li>
            </ul>
            <h4 class="font-bold mt-4 mb-2 font-serif">四種功能類型（兩種判斷功能，兩種感知功能）：</h4>
            <ul class="list-disc list-inside space-y-2">
                <li><strong>思維 (Thinking):</b> 以邏輯和客觀分析來做決定。（理性）</li>
                <li><strong>情感 (Feeling):</strong> 以個人價值和人際和諧來做決定。（理性）</li>
                <li><strong>感官 (Sensing):</strong> 透過五官來感知具體、真實的訊息。（非理性）</li>
                <li><strong>直覺 (Intuition):</strong> 感知事物的可能性、模式和內在關聯。（非理性）</li>
            </ul>
            <p class="mt-4">每個人都擁有這八種組合（如：內傾思維、外傾情感），但通常會有一種主要的優勢功能和態度，這構成了我們獨特的人格類型。這套理論是著名的MBTI人格測試的基礎。</p>
        `
    },
    libido: {
        title: '力比多：生命的能量',
        content: `
            <p>在榮格的理論中，「力比多」是一個遠比佛洛伊德的定義更為廣泛和根本的概念。</p>
            <ul class="list-disc list-inside space-y-2 mt-4">
                <li><strong>非單純的性驅力:</strong> 榮格認為，將所有心理能量都歸結為性，是一種還原論。力比多是廣義的「心理能量」或「生命力」。</li>
                <li><strong>驅動所有心理活動:</b> 這種能量驅動著我們所有的心理過程，包括思考、感受、渴望、意志和靈性追求。</li>
                <li><strong>能量的流動與轉化:</strong> 力比多像物理能量一樣，會流動、轉化和被阻滯。當能量受阻時，就可能產生「情結」或心理症狀。心理治療的目標之一，就是幫助這種能量重新順暢地流動，並將其引導至有創造性的方向。</li>
            </ul>
            <p class="mt-4">這個概念的擴展，是榮格與佛洛伊德決裂的關鍵點之一，也為榮格探索宗教、神話和靈性等更廣闊的人類經驗領域奠定了基礎。</p>
        `
    }
};

let psycheChart = null;

function showModal(key) {
    modalTitle.textContent = modalData[key].title;
    modalBody.innerHTML = modalData[key].content;
    modal.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
    
    setTimeout(() => {
        modal.querySelector('.modal-content').classList.remove('scale-95');
        modal.classList.remove('opacity-0');
    }, 10);

    if (key === 'psyche') {
        setTimeout(() => {
            const ctx = document.getElementById('psycheChart').getContext('2d');
            if(psycheChart) {
                psycheChart.destroy();
            }
            psycheChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['意識', '個人無意識', '集體無意識'],
                    datasets: [{
                        label: '心靈結構',
                        data: [10, 30, 60],
                        backgroundColor: [
                            'rgba(115, 149, 174, 0.7)',
                            'rgba(177, 162, 150, 0.7)',
                            'rgba(160, 82, 45, 0.7)'
                        ],
                        borderColor: [
                            '#7395AE',
                            '#B1A296',
                            '#A0522D'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed !== null) {
                                        label += context.parsed + '% (示意比例)';
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }, 100);
    }
}

function closeModal() {
    modal.querySelector('.modal-content').classList.add('scale-95');
    modal.classList.add('opacity-0');
    setTimeout(() => {
        modal.classList.add('hidden');
        document.body.style.overflow = 'auto';
    }, 300);
}

modal.addEventListener('click', (e) => {
    if (e.target === modal) {
        closeModal();
    }
});
</script>

</body>
</html>
